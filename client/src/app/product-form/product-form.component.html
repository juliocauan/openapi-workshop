<div class="container">
  <header class="header">
    <h1>ğŸ›ï¸ CatÃ¡logo de Produtos</h1>
  </header>

  <!-- FormulÃ¡rio de CriaÃ§Ã£o/EdiÃ§Ã£o -->
  <div class="card">
    <h2>{{ isEditing ? 'âœï¸ Editar Produto' : 'â• Adicionar Novo Produto' }}</h2>
    
    <form (ngSubmit)="onSubmit()" class="form">
      <div class="form-group">
        <label for="nome">Nome do Produto</label>
        <input 
          id="nome"
          type="text"
          [(ngModel)]="newProduct.nome" 
          name="nome" 
          placeholder="Ex: Smartphone X"
          required
          class="input"
        >
      </div>

      <div class="form-group">
        <label for="preco">PreÃ§o (R$)</label>
        <input 
          id="preco"
          type="number"
          step="0.01"
          [(ngModel)]="newProduct.preco" 
          name="preco" 
          placeholder="0.00"
          required
          class="input"
        >
      </div>

      <div class="button-group">
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          {{ loading ? 'â³ Processando...' : (isEditing ? 'ğŸ’¾ Salvar AlteraÃ§Ãµes' : 'âœ¨ Criar Produto') }}
        </button>
        
        <button 
          type="button" 
          *ngIf="isEditing"
          (click)="cancelEdit()"
          class="btn btn-secondary"
        >
          âŒ Cancelar
        </button>
      </div>
    </form>

    <!-- Mensagens de Feedback -->
    <div *ngIf="message" [class]="messageClass" class="message">
      {{ message }}
    </div>
  </div>

  <!-- Lista de Produtos -->
  <div class="card">
    <div class="card-header">
      <h2>ğŸ“¦ Produtos Cadastrados</h2>
      <button 
        (click)="loadProducts()" 
        class="btn btn-secondary btn-sm"
        [disabled]="loading"
      >
        ğŸ”„ Atualizar
      </button>
    </div>

    <div *ngIf="loadingList" class="loading-state">
      <div class="spinner"></div>
      <p>Carregando produtos...</p>
    </div>

    <div *ngIf="!loadingList && products.length === 0" class="empty-state">
      <p>ğŸ“­ Nenhum produto cadastrado ainda</p>
      <small>Use o formulÃ¡rio acima para adicionar o primeiro produto</small>
    </div>

    <div *ngIf="!loadingList && products.length > 0" class="products-grid">
      <div *ngFor="let product of products" class="product-card">
        <div class="product-header">
          <h3>{{ product.nome }}</h3>
          <span 
            class="badge" 
            [class.badge-success]="product.em_estoque"
            [class.badge-danger]="!product.em_estoque"
          >
            {{ product.em_estoque ? 'âœ“ Em Estoque' : 'âœ— Esgotado' }}
          </span>
        </div>

        <div class="product-body">
          <p class="product-id">ID: {{ product.id }}</p>
          <p class="product-price">R$ {{ product.preco.toFixed(2) }}</p>
        </div>

        <div class="product-actions">
          <button 
            (click)="viewProduct(product.id)"
            class="btn btn-info btn-sm"
            title="Ver detalhes"
          >
            ğŸ‘ï¸ Ver
          </button>
          <button 
            (click)="editProduct(product)"
            class="btn btn-warning btn-sm"
            title="Editar produto"
          >
            âœï¸ Editar
          </button>
          <button 
            (click)="deleteProduct(product.id)"
            class="btn btn-danger btn-sm"
            title="Excluir produto"
          >
            ğŸ—‘ï¸ Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Detalhes do Produto -->
  <div *ngIf="selectedProduct" class="card card-info">
    <div class="card-header">
      <h2>ğŸ” Detalhes do Produto</h2>
      <button 
        (click)="closeDetails()"
        class="btn btn-secondary btn-sm"
      >
        âœ• Fechar
      </button>
    </div>
    
    <div class="product-details">
      <div class="detail-row">
        <span class="detail-label">ID:</span>
        <span class="detail-value">{{ selectedProduct.id }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Nome:</span>
        <span class="detail-value">{{ selectedProduct.nome }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">PreÃ§o:</span>
        <span class="detail-value">R$ {{ selectedProduct.preco.toFixed(2) }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Estoque:</span>
        <span class="detail-value">
          <span 
            class="badge" 
            [class.badge-success]="selectedProduct.em_estoque"
            [class.badge-danger]="!selectedProduct.em_estoque"
          >
            {{ selectedProduct.em_estoque ? 'âœ“ DisponÃ­vel' : 'âœ— IndisponÃ­vel' }}
          </span>
        </span>
      </div>
    </div>
  </div>
</div>